
## Контекст

Глобальный снимок должен иметь детерминированный триггер, чтобы снимки, созданные на разных узлах, сходились (содержали одни и те же данные) и проходили алгоритм большинства.

Как описано в [ADR#2](./0007-global-and-state-channel-snapshots.md), Глобальный снимок содержит как DAG блоки, так и снимки StateChannel.

## Решение

Существует два способа запуска Глобального Снимка: "Триггер советов" и "Периодический триггер".

### Триггер советов
L1 узлы отправляют данные советов вместе с блоками. L0 узлы агрегируют советы и запускают Глобальный Снимок, когда советы достигнут некоторого интервала (будет жестко задан). Этот триггер создает "непустой" Глобальный Снимок и должен увеличивать `height` и устанавливать `subHeight` равным `0`.

### Периодический триггер
Если с L1 не отправляются новые блоки, то L0 узлы периодически пытаются создать "пустой" Глобальный Снимок. Каждый новый "пустой" Глобальный Снимок должен увеличивать `subHeight`, пока не будет создан "непустой" снимок.

### Ординал
Каждый снимок имеет уникальный ординальный номер. Ординальный номер назначается новому Глобальному Снимку путем увеличения значения предыдущего Глобального Снимка. Это происходит всегда, независимо от выбранного триггера.

## Последствия

- Глобальные Снимки, созданные разными триггерами, должны увеличивать `height` по-разному.
- В Глобальных Снимках должен быть введен ординальный номер, чтобы они были совместимы с Rosetta.